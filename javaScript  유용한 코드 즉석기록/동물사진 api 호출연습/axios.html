<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
  </head>
  <body style="display: flex; justify-content: center">
    <div class="button_container" style="position: fixed; z-index: 1">
      <button
        class="randomDog"
        style="
          color: rgb(12, 12, 12);
          width: 250px;
          height: 90px;
          border-radius: 0.5rem;
          font-size: 1.5rem;
        "
      >
        개 사진 생성버튼
      </button>
      <button
        class="randomFox"
        style="
          color: rgb(12, 12, 12);
          width: 250px;
          height: 90px;
          border-radius: 0.5rem;
          font-size: 1.5rem;
        "
      >
        여우 사진 생성버튼
      </button>
      <button
        class="randomCat"
        style="
          color: rgb(12, 12, 12);
          width: 250px;
          height: 90px;
          border-radius: 0.5rem;
          font-size: 1.5rem;
        "
      >
        고양이 사진 생성버튼
      </button>
      <button
        class="randomRabbit"
        style="
          color: rgb(12, 12, 12);
          width: 250px;
          height: 90px;
          border-radius: 0.5rem;
          font-size: 1.5rem;
        "
      >
        토끼 사진 생성버튼
      </button>
    </div>
    <div
      class="image_posted"
      style="position: relative; top: 100px; z-index: 0"
    ></div>
  </body>

  <script>
    const start = () => {
      const randomDogBtn = document.querySelector(".randomDog"),
        randomFoxBtn = document.querySelector(".randomFox"),
        randomCatBtn = document.querySelector(".randomCat"),
        randomRabbitBtn = document.querySelector(".randomRabbit"),
        imagePostedZone = document.querySelector(".image_posted");

      const configAnimals = {
        catUrl: "https://aws.random.cat/meow",
        dogUrl: "https://random.dog/woof.json",
        foxUrl: "https://randomfox.ca/floof/",
        rabbitUrl: "https://source.unsplash.com/featured/?Rabbit",
      };

      const urlParseEx = (img) => {
        const parseUrl = img.split(".");
        const nameExValue = parseUrl[parseUrl.length - 1];
        return nameExValue;
      };

      const createdVideoOBJ = (image, dataUrl) => {
        image = null;
        let newVideoTag = document.createElement("video");
        newVideoTag.setAttribute("src", dataUrl);
        newVideoTag.setAttribute("width", "300");
        newVideoTag.setAttribute("autoplay", "true");
        newVideoTag.setAttribute("loop", "true");
        image = newVideoTag;
        return image;
      };

      function clickScrollDown() {
        window.scrollBy(0, 1000);
      }

      const randomImageMaker = (URL) => {
        axios
          .get(URL)
          .then((response) => {
            let image = new Image(300);
            switch (URL) {
              case configAnimals.catUrl:
                image.src = response.data.file;
                break;

              case configAnimals.dogUrl:
                image.src = response.data.url;
                let fileNameEx = urlParseEx(image.src);

                if (fileNameEx === "mp4" || fileNameEx === "webm") {
                  image = createdVideoOBJ(image, response.data.url);
                }
                break;

              case configAnimals.foxUrl:
                image.src = response.data.image;
                break;

              case configAnimals.rabbitUrl:
                image.src = URL;
                console.log(URL);
                break;
            }
            imagePostedZone.appendChild(image);
          })
          .catch(function (error) {
            imagePostedZone.innerHTML = error;
          });
        clickScrollDown();
      };

      randomCatBtn.addEventListener("click", () => {
        randomImageMaker(configAnimals.catUrl);
      });

      randomDogBtn.addEventListener("click", () => {
        randomImageMaker(configAnimals.dogUrl);
      });

      randomFoxBtn.addEventListener("click", () => {
        randomImageMaker(configAnimals.foxUrl);
      });

      randomRabbitBtn.addEventListener("click", () => {
        randomImageMaker(configAnimals.rabbitUrl);
      });
    };

    const init = () => {
      start();
    };

    init();
  </script>
</html>
