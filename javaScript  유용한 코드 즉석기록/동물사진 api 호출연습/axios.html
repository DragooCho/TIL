<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <title>Document</title>
  </head>
  <body>
    <div></div>
    <button
      class="randomDog"
      style="
        color: rgb(12, 12, 12);
        width: 200px;
        height: 50px;
        border-radius: 0.5rem;
      "
    >
      개 사진 생성버튼
    </button>
    <button
      class="randomFox"
      style="
        color: rgb(12, 12, 12);
        width: 200px;
        height: 50px;
        border-radius: 0.5rem;
      "
    >
      여우 사진 생성버튼
    </button>
    <button
      class="randomCat"
      style="
        color: rgb(12, 12, 12);
        width: 200px;
        height: 50px;
        border-radius: 0.5rem;
      "
    >
      고양이 사진 생성버튼
    </button>
  </body>
  <script>
    const start = () => {
      const randomDogBtn = document.querySelector(".randomDog"),
        randomFoxBtn = document.querySelector(".randomFox"),
        randomCatBtn = document.querySelector(".randomCat"),
        divTag = document.querySelector("div");

      const configAnimals = {
        catUrl: "https://aws.random.cat/meow",
        dogUrl: "https://random.dog/woof.json",
        foxUrl: "https://randomfox.ca/floof/",
      };

      const animalImageMaker = (Url) => {
        axios
          .get(Url)
          .then((response) => {
            let image = new Image(300);
            switch (Url) {
              case configAnimals.catUrl:
                image.src = response.data.file;
                break;

              case configAnimals.dogUrl:
                image.src = response.data.url;
                const parseUrl = image.src.split(".");
                const fileNameEx = parseUrl[parseUrl.length - 1];

                if (fileNameEx === "mp4" || fileNameEx === "webm") {
                  image = null;
                  let newVideoTag = document.createElement("video");
                  newVideoTag.setAttribute("src", response.data.url);
                  newVideoTag.setAttribute("width", "300");
                  newVideoTag.setAttribute("autoplay", "true");
                  newVideoTag.setAttribute("loop", "true");
                  image = newVideoTag;
                }

                break;

              case configAnimals.foxUrl:
                image.src = response.data.image;
                break;
            }
            divTag.appendChild(image);
          })
          .catch(function (error) {
            divTag.innerHTML = error;
          });
      };

      randomCatBtn.addEventListener("click", () => {
        animalImageMaker(configAnimals.catUrl);
      });

      randomDogBtn.addEventListener("click", () => {
        animalImageMaker(configAnimals.dogUrl);
      });

      randomFoxBtn.addEventListener("click", () => {
        animalImageMaker(configAnimals.foxUrl);
      });
    };

    const init = () => {
      start();
    };

    init();
  </script>
</html>
