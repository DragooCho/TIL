<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script
      src="https://code.jquery.com/jquery-3.6.0.js"
      integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
      crossorigin="anonymous"
    ></script>
    <title>Document</title>
  </head>
  <body style="display: flex; justify-content: center">
    <div class="button_container" style="position: fixed; z-index: 1">
      <button
        class="randomDog"
        style="
          color: rgb(12, 12, 12);
          width: 250px;
          height: 90px;
          border-radius: 0.5rem;
          font-size: 1.5rem;
        "
      >
        생성버튼
      </button>
    </div>
    <div
      class="image_posted"
      style="position: relative; top: 100px; z-index: 0"
    ></div>
  </body>

  <script>
    const randomDogBtn = document.querySelector(".randomDog"),
      imagePostedZone = document.querySelector(".image_posted");

    const configAnimals = {
      dogUrl: "https://random.dog/woof.json",
    };

    const urlParseEx = (img) => {
      const parseUrl = img.split(".");
      const nameExValue = parseUrl[parseUrl.length - 1];
      return nameExValue;
    };

    const createdVideoOBJ = (image, dataUrl) => {
      image = null;
      let newVideoTag = document.createElement("video");
      newVideoTag.setAttribute("src", dataUrl);
      newVideoTag.setAttribute("width", "300");
      newVideoTag.setAttribute("autoplay", "true");
      newVideoTag.setAttribute("loop", "true");
      image = newVideoTag;
      return image;
    };

    function clickScrollDown() {
      window.scrollBy(0, 1000);
    }

    const randomImageMaker = () => {
      let image = new Image(200);

      $.ajax({
        method: "get",
        url: "https://dapi.kakao.com/v3/search/book?target=title",
        data: { query: "미움받을 용기" },
        headers: { Authorization: "KakaoAK 8991f45a5116ec0059da6ef479c6f01c" },
      }).done((res) => {
        image.src = res.documents[0].thumbnail;
        imagePostedZone.appendChild(image);

        let newTextTag3 = document.createElement("h3");
        let newTitleText = document.createTextNode(res.documents[0].title);
        newTextTag3.appendChild(newTitleText);
        imagePostedZone.appendChild(newTextTag3);

        console.log(res.documents[0].title);
        console.log(res.documents[0].thumbnail);
        console.log(res.documents[0].authors[0], res.documents[0].authors[1]);
        console.log(res.documents[0].contents);
        console.log("정가", res.documents[0].price, "원");
        console.log("세일가격", res.documents[0].sale_price, "원");
      });

      clickScrollDown();
    };

    randomDogBtn.addEventListener("click", randomImageMaker);
  </script>
</html>
